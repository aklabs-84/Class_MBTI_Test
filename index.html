<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìš°ë¦¬ ë°˜ ìœ íŠœë¸Œ ì±„ë„ MBTI í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Jua', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 600px;
        }
        .bg-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 2rem;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .input-glow {
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.4);
        }
        .name-input {
            transition: all 0.3s ease;
        }
        .name-input:focus {
            transform: scale(1.02);
            box-shadow: 0 0 30px rgba(102, 126, 234, 0.6);
        }
        .bounce-in {
            animation: bounceIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        .slide-in {
            animation: slideIn 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .result-animation {
            animation: resultPop 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes resultPop {
            0% { transform: scale(0.5) rotate(-5deg); opacity: 0; }
            50% { transform: scale(1.1) rotate(2deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        .typing-effect {
            border-right: 2px solid #667eea;
            animation: typing 2s steps(30) infinite;
        }
        @keyframes typing {
            0%, 50% { border-color: #667eea; }
            51%, 100% { border-color: transparent; }
        }
        .hover-lift {
            transition: all 0.3s ease;
        }
        .hover-lift:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .pulse-ring {
            animation: pulse-ring 2s infinite;
        }
        @keyframes pulse-ring {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <!-- ì˜¤ë””ì˜¤ ìš”ì†Œë“¤ -->
    <audio id="bgm" loop>
        <source src="bgm.mp3" type="audio/mpeg">
    </audio>
    <audio id="clickSound">
        <source src="click.mp3" type="audio/mpeg">
    </audio>
    <audio id="resultSound">
        <source src="result.mp3" type="audio/mpeg">
    </audio>

    <div class="container mx-auto p-8 bg-card">
        <div id="test-container" class="space-y-6">
            <!-- ì²« í˜ì´ì§€ (ì´ë¦„ ì…ë ¥) -->
            <div id="start-screen" class="text-center space-y-8 bounce-in">
                <div class="space-y-4">
                    <h1 class="text-5xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">
                        ìš°ë¦¬ ë°˜ ìœ íŠœë¸Œ ì±„ë„
                    </h1>
                    <h2 class="text-3xl font-bold text-gray-700">MBTI í…ŒìŠ¤íŠ¸</h2>
                    <p class="text-gray-600 text-lg typing-effect">
                        ë‚´ê°€ ë§Œì•½ ìš°ë¦¬ ë°˜ ìœ íŠœë¸Œ ì±„ë„ ë©¤ë²„ë¼ë©´? ë‚˜ì˜ ì—­í• ì€ ë¬´ì—‡ì¼ê¹Œ?
                    </p>
                </div>
                
                <div class="space-y-6 mt-12">
                    <div class="relative">
                        <input 
                            type="text" 
                            id="userName" 
                            placeholder="ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" 
                            class="w-full px-6 py-4 text-xl text-center border-2 border-purple-300 rounded-2xl name-input focus:outline-none focus:border-purple-500 bg-white/80"
                            maxlength="10"
                        >
                        <div class="absolute inset-0 rounded-2xl bg-gradient-to-r from-purple-400 to-blue-400 opacity-0 transition-opacity duration-300 pointer-events-none" id="inputGlow"></div>
                    </div>
                    
                    <button id="start-button" class="px-12 py-4 text-xl font-bold text-white bg-gradient-to-r from-purple-500 to-blue-500 rounded-2xl shadow-lg hover-lift pulse-ring transform transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        ğŸš€ í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°
                    </button>
                </div>
            </div>
            
            <!-- í€´ì¦ˆ í™”ë©´ -->
            <div id="quiz-screen" class="hidden">
                <div id="quiz-question-container" class="text-center fade-in">
                    <!-- ë¬¸ì œì™€ ë³´ê¸°ê°€ ì—¬ê¸°ì— ë Œë”ë§ë©ë‹ˆë‹¤ -->
                </div>
                <div class="w-full h-3 mt-8 bg-gray-200 rounded-full overflow-hidden">
                    <div id="progress-bar" class="h-3 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full transition-all duration-500 ease-out"></div>
                </div>
                <div id="progress-text" class="mt-3 text-sm text-right text-gray-600 font-semibold">1/12</div>
            </div>

            <!-- ê²°ê³¼ í™”ë©´ -->
            <div id="result-screen" class="hidden text-center space-y-6">
                <div class="result-animation">
                    <h2 class="text-4xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent mb-4">
                        ğŸ‰ ë‹¹ì‹ ì˜ ìœ í˜•ì€...
                    </h2>
                    <div id="result-type" class="text-4xl font-extrabold text-purple-700 mb-6 p-4 bg-gradient-to-r from-purple-100 to-blue-100 rounded-2xl"></div>
                </div>
                
                <div id="result-description" class="space-y-4 text-left bg-white/60 p-6 rounded-2xl backdrop-blur-sm">
                    <p id="result-feature" class="text-xl font-semibold text-gray-800 leading-relaxed"></p>
                    <div class="space-y-2 text-gray-700">
                        <p id="result-strengths" class="text-base leading-relaxed"></p>
                        <p id="result-weaknesses" class="text-base leading-relaxed"></p>
                        <p id="result-match" class="text-base leading-relaxed"></p>
                        <p id="result-character" class="text-base leading-relaxed"></p>
                    </div>
                </div>
                
                <div class="flex flex-col sm:flex-row gap-4 justify-center mt-8">
                    <button id="copy-button" class="px-8 py-3 font-bold text-purple-600 bg-white border-2 border-purple-500 rounded-2xl shadow-lg hover-lift transition-all duration-300">
                        ğŸ“‹ ê²°ê³¼ ë³µì‚¬í•˜ê¸°
                    </button>
                    <button id="restart-button" class="px-8 py-3 font-bold text-white bg-gradient-to-r from-purple-500 to-blue-500 rounded-2xl shadow-lg hover-lift transition-all duration-300">
                        ğŸ”„ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // êµ¬ê¸€ ì•±ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ ì›¹ì•± URL (ì‹¤ì œ URLë¡œ êµì²´ í•„ìš”)
        const GOOGLE_APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzaTT7djjIp5NAckO7hJZZN4bRhnPXAWvHSMWtL9Y4sFpf0q9106qBN_YdjpPq68yn3Eg/exec';

        document.addEventListener('DOMContentLoaded', () => {
            const quizData = [
                {
                    question: "ìš°ë¦¬ ë°˜ ìœ íŠœë¸Œ ì±„ë„ ì²« íšŒì˜ ì‹œê°„! 'ìš°ë¦¬ ë­ ë§Œë“¤ì§€?' ì§ˆë¬¸ì´ ë‚˜ì˜¤ìë§ˆì ë‚˜ëŠ”?",
                    options: [
                        { text: '"ì•¼! ë‚´ê°€ ê¸°ê°€ ë§‰íŒ ì•„ì´ë””ì–´ ë– ì˜¬ë ¸ëŠ”ë° ë“¤ì–´ë´!" í•˜ê³  í¥ë¶„í•˜ë©° ë– ë“ ë‹¤.', value: 'E' },
                        { text: 'ì¼ë‹¨ ì¹œêµ¬ë“¤ ì–˜ê¸°ë¶€í„° ì¡°ìš©íˆ ë“£ë‹¤ê°€, ê´œì°®ì€ ì•„ì´ë””ì–´ê°€ ë‚˜ì˜¤ë©´ ì†ìœ¼ë¡œ \'ì˜¤...\' í•˜ë©° ê³µê°í•œë‹¤.', value: 'I' }
                    ],
                    type: 'E-I'
                },
                {
                    question: "'ì•„~ ì§„ì§œ ì°ê¸° ì‹«ì–´!' í•˜ëŠ” ì¹œêµ¬ë¥¼ ì´¬ì˜ì— ëŒì–´ë“¤ì—¬ì•¼ í•  ë•Œ ë‚˜ëŠ”?",
                    options: [
                        { text: '"ê±±ì • ë§ˆ! ë‚´ê°€ ì˜†ì—ì„œ ë‹¤ ë„ì™€ì¤„ê²Œ!" ë¼ë©° íŒ”ì§±ì„ ë¼ê³  ì§ì ‘ ë°ë¦¬ê³  ê°„ë‹¤.', value: 'E' },
                        { text: '"ê·¸ëŸ¼ ì¶œì—°ì€ ì•ˆ í•˜ê³  í¸ì§‘ë§Œ í• ë˜?" ë¼ë©° ì¹œêµ¬ê°€ í¸ì•ˆí•´í•  ë§Œí•œ ëŒ€ì•ˆì„ ì œì‹œí•œë‹¤.', value: 'I' }
                    ],
                    type: 'E-I'
                },
                {
                    question: "ê°‘ìê¸° êµ¬ë…ì 100ë§Œ ëª…ì„ ë‹¬ì„±í•´ì„œ ì‹œìƒì‹ì— ê°€ê²Œ ëœë‹¤ë©´?",
                    options: [
                        { text: 'ì¹´ë©”ë¼ì™€ ìˆ˜ë§ì€ íŒ¬ë“¤ ì•ì—ì„œ "ì—¬ëŸ¬ë¶„ ì‚¬ë‘í•´ìš”!" ë¼ë©° ìˆ˜ìƒ ì†Œê°ì„ ì‹ ë‚˜ê²Œ ì™¸ì¹œë‹¤.', value: 'E' },
                        { text: 'ìˆ˜ìƒëŒ€ì— ì˜¬ë¼ì„œëŠ” ê±´ ì¢€ ì‘¥ìŠ¤ëŸ½ê³ , ê·¸ëƒ¥ ë’¤ì—ì„œ ë°•ìˆ˜ë‚˜ ì¹˜ë©° ì¦ê¸°ê³  ì‹¶ë‹¤.', value: 'I' }
                    ],
                    type: 'E-I'
                },
                {
                    question: "ìš°ë¦¬ ë°˜ ìˆí¼ ì±Œë¦°ì§€ ì˜ìƒì„ ë§Œë“¤ ë•Œ ë‚˜ëŠ”?",
                    options: [
                        { text: 'ë‹¤ë¥¸ ìœ íŠœë²„ê°€ ì–´ë–»ê²Œ í–ˆëŠ”ì§€ë¶€í„° ì°¾ì•„ë³´ê³  ë˜‘ê°™ì´ ë”°ë¼ í•´ ë³¸ë‹¤.', value: 'S' },
                        { text: "'ì´ê²Œ ê³¼ì—° ë ê¹Œ?' ì‹¶ì§€ë§Œ, ì•„ë¬´ë„ ì•ˆ í•´ë³¸ ê¸°ë°œí•œ ë™ì‘ì„ ë¨¼ì € ë– ì˜¬ë¦°ë‹¤.", value: 'N' }
                    ],
                    type: 'S-N'
                },
                {
                    question: "'ì´ ì˜ìƒ ì™œ ì´ë¦¬ ì¡°íšŒìˆ˜ê°€ ì•ˆ ë‚˜ì˜¤ì§€?' ê³ ë¯¼ì´ ë  ë•Œ ë‚˜ëŠ”?",
                    options: [
                        { text: 'ì˜ìƒ ì œëª©, ì¸ë„¤ì¼, ì—…ë¡œë“œ ì‹œê°„ ë“± ì‹¤ì œ ë°ì´í„°ë¶€í„° ê¼¼ê¼¼í•˜ê²Œ ë¶„ì„í•œë‹¤.', value: 'S' },
                        { text: "'ì–´ì©Œë©´ ìš°ë¦¬ ì±„ë„ì˜ ë¯¸ë˜ê°€ ë°”ë€ŒëŠ” ìˆœê°„ì¼ì§€ë„ ëª°ë¼!' ë¼ë©° ë¨¼ ë¯¸ë˜ë¶€í„° ìƒìƒí•œë‹¤.", value: 'N' }
                    ],
                    type: 'S-N'
                },
                {
                    question: "ì´¬ì˜ ì§ì „ ì¥ì†Œê°€ ë°”ë€Œê²Œ ëœë‹¤ë©´?",
                    options: [
                        { text: '"ì–´ë–¤ ì¥ë¹„ê°€ ë” í•„ìš”í• ê¹Œ?", "ë¹›ì€ ì¶©ë¶„í• ê¹Œ?" ë“± ì‹¤ì§ˆì ì¸ ë¬¸ì œë¥¼ ë°”ë¡œ í™•ì¸í•œë‹¤.', value: 'S' },
                        { text: '"ì˜¤! ìƒê°ì§€ë„ ëª»í–ˆëŠ”ë° ë” ì¬ë¯¸ìˆëŠ” ì˜ìƒì´ ë‚˜ì˜¤ê² ë„¤!" ë¼ë©° ìƒˆë¡œìš´ ìƒí™©ì„ í¥ë¯¸ë¡­ê²Œ ë°›ì•„ë“¤ì¸ë‹¤.', value: 'N' }
                    ],
                    type: 'S-N'
                },
                {
                    question: "ì¹œêµ¬ì˜ ì˜ìƒì´ í¸ì§‘ ê³¼ì •ì—ì„œ ì‹¤ìˆ˜ë¡œ ë‚ ì•„ê°”ë‹¤! ì´ë•Œ ë‚˜ëŠ”?",
                    options: [
                        { text: '"ì™œ ë°±ì—…ì„ ì•ˆ í–ˆì–´? ë‹¤ìŒë¶€í„°ëŠ” ê¼­ ë°±ì—…í•´." ë¼ë©° í•´ê²°ì±…ë¶€í„° ë§í•´ì¤€ë‹¤.', value: 'T' },
                        { text: '"ê´œì°®ì•„... ì–¼ë§ˆë‚˜ ì†ìƒí• ê¹Œ..." ë¼ë©° ì¹œêµ¬ì˜ ë§ˆìŒì„ ë¨¼ì € ìœ„ë¡œí•´ ì¤€ë‹¤.', value: 'F' }
                    ],
                    type: 'T-F'
                },
                {
                    question: '"ë‹ˆê°€ ì¶œì—°í•˜ë©´ ì¡°íšŒìˆ˜ê°€ ì•ˆ ë‚˜ì˜¬ ê²ƒ ê°™ì•„" ë¼ëŠ” ëŒ“ê¸€ì„ ë³´ì•˜ë‹¤ë©´?',
                    options: [
                        { text: "'ìŒ... ë‚´ ì—°ê¸°ê°€ ë¶€ì¡±í–ˆë‚˜?' ë¼ë©° ìì‹ ì˜ ì—°ê¸°ë ¥ì„ ê°ê´€ì ìœ¼ë¡œ í‰ê°€í•œë‹¤.", value: 'T' },
                        { text: "'ì•…í”Œì€ ë¬´ì‹œí•´ì•¼ì§€!' ë¼ë©° ìƒì²˜ë°›ì€ ë§ˆìŒì„ ê°ì¶”ê³  ì†ìƒí•´í•œë‹¤.", value: 'F' }
                    ],
                    type: 'T-F'
                },
                {
                    question: "ì½˜í…ì¸ ì— ì¬ë¯¸ë¥¼ ìœ„í•´ ì¹œêµ¬ì˜ ë¹„ë°€ì´ í­ë¡œë˜ëŠ” ì¥ë©´ì„ ë„£ì–´ì•¼ í•œë‹¤ë©´?",
                    options: [
                        { text: '"ì¬ë¯¸ë¥¼ ìœ„í•´ì„œë¼ë©´ ì´ ì •ë„ëŠ” ê´œì°®ì§€!" ë¼ë©° ë…¼ë¦¬ì ìœ¼ë¡œ ì„¤ë“í•œë‹¤.', value: 'T' },
                        { text: 'ì¹œêµ¬ê°€ ìƒì²˜ë°›ì„ê¹Œ ë´ "ê·¸ëƒ¥ ê·¸ ì¥ë©´ì€ ë¹¼ì" ë¼ê³  ë¨¼ì € ì œì•ˆí•œë‹¤.', value: 'F' }
                    ],
                    type: 'T-F'
                },
                {
                    question: "ìš°ë¦¬ ë°˜ ìœ íŠœë¸Œ ì±„ë„ì„ ì‹œì‘í•˜ê¸° ì „, ë‚˜ëŠ”?",
                    options: [
                        { text: '"ì¼ë‹¨ íšŒì˜ë¶€í„° í•˜ì! ì—­í•  ë¶„ë‹´, ì£¼ì œ, ì´¬ì˜ ë‚ ì§œ, ì—…ë¡œë“œ ë‚ ì§œ ë‹¤ ì •í•´ì•¼ì§€!" ë¼ë©° ê³„íšì„ ì„¸ìš´ë‹¤.', value: 'J' },
                        { text: '"ë­ë¶€í„° í• ê¹Œ? ì¼ë‹¨ ì˜ìƒ í•˜ë‚˜ ì°ì–´ë³´ê³  ìƒê°í•´ë„ ë  ê²ƒ ê°™ì€ë°?" ë¼ë©° ììœ ë¡­ê²Œ ì‹œì‘í•œë‹¤.', value: 'P' }
                    ],
                    type: 'J-P'
                },
                {
                    question: "ì´¬ì˜ ì§ì „, 'ì§€ê¸ˆ ì•„ì´ë””ì–´ê°€ ë°”ë€Œì—ˆëŠ”ë°...?' ë¼ëŠ” ì¹œêµ¬ì˜ ë§ì— ë‚˜ëŠ”?",
                    options: [
                        { text: '"ë¬´ìŠ¨ ì†Œë¦¬ì•¼! ì´ë¯¸ ê³„íš ë‹¤ ì§œë†¨ì–ì•„!" ë¼ë©° í˜¼ë€ìŠ¤ëŸ¬ì›Œí•œë‹¤.', value: 'J' },
                        { text: '"ê·¸ë˜? ê·¸ëŸ¼ ê°‘ìê¸° ë°”ê¿”ì„œ ì°ëŠ” ê²ƒë„ ì¬ë¯¸ìˆê² ë‹¤!" ë¼ë©° ìƒˆë¡œìš´ ìƒí™©ì„ ì¦ê¸´ë‹¤.', value: 'P' }
                    ],
                    type: 'J-P'
                },
                {
                    question: "'ì´ë²ˆ ë‹¬ ì•ˆì— êµ¬ë…ì 100ëª… ë‹¬ì„±!' ì´ë¼ëŠ” ëª©í‘œë¥¼ ì •í–ˆë‹¤ë©´?",
                    options: [
                        { text: 'ëª©í‘œë¥¼ ì´ë£¨ê¸° ìœ„í•´ ë§¤ì¼ë§¤ì¼ í•  ì¼ì„ ê¼¼ê¼¼íˆ ì²´í¬í•˜ë©° ê°•ë°•ì ìœ¼ë¡œ ë‹¬ë ¤ê°„ë‹¤.', value: 'J' },
                        { text: "'ì•ˆ ë˜ë©´ ì–´ë•Œ!' ë¼ëŠ” ë§ˆìŒìœ¼ë¡œ í¸í•˜ê²Œ ìƒê°í•˜ê³ , ë  ë•Œê¹Œì§€ ì¦ê²ê²Œ ì˜ìƒì„ ë§Œë“ ë‹¤.", value: 'P' }
                    ],
                    type: 'J-P'
                }
            ];

            const results = {
                'ISTJ': {
                    name: 'ì²­ë ´ê²°ë°±í•œ ë…¼ë¦¬ì£¼ì˜ì',
                    feature: 'ì±…ì„ê° ê°•í•œ ìœ íŠœë¸Œ ì±„ë„ì˜ \'ì´ê´„ PD\'. ì² ì €í•œ ê³„íšê³¼ ê¼¼ê¼¼í•œ ê´€ë¦¬ë¡œ ì±„ë„ì„ ì„±ê³µìœ¼ë¡œ ì´ëŒì–´ìš”.',
                    strengths: 'ê°•ì : ê¼¼ê¼¼í•œ í¸ì§‘, ì²´ê³„ì ì¸ ì¼ì • ê´€ë¦¬, ë†’ì€ ì™„ì„±ë„',
                    weaknesses: 'ì•½ì : ìƒˆë¡œìš´ ì‹œë„ë‚˜ ì¦‰í¥ì ì¸ ì•„ì´ë””ì–´ì— ëŒ€í•œ ê±°ë¶€ê°',
                    match: 'ì°°ë–¡ê¶í•©: ESFP, ESTP',
                    character: 'ìºë¦­í„° ë¹„ìœ : ê³„íšëŒ€ë¡œ ì°©ì°©! ë¬´ì„œìš¸ ì •ë„ë¡œ ì™„ë²½í•œ \'ë§ˆìŠ¤í„° í”Œë˜ë„ˆ\'.'
                },
                'ISFJ': {
                    name: 'ìš©ê°í•œ ìˆ˜í˜¸ì',
                    feature: 'íŒ€ì˜ ë“ ë“ í•œ ì„œí¬í„°\'. ì¡°ìš©í•˜ì§€ë§Œ íŒ€ì›ë“¤ì„ ë¬µë¬µíˆ ì±™ê¸°ë©° ì•ˆì •ì ì¸ ìš´ì˜ì„ ë•ëŠ” ì—†ì–´ì„œëŠ” ì•ˆ ë  ì¡´ì¬.',
                    strengths: 'ê°•ì : íŒ€ì›ë“¤ì˜ ì˜ê²¬ ê²½ì²­, ì„¬ì„¸í•˜ê³  ë”°ëœ»í•œ ì½˜í…ì¸  ê¸°íš, ë“ ë“ í•œ ì„œí¬í„° ì—­í• ',
                    weaknesses: 'ì•½ì : ìì‹ ì˜ ì˜ê²¬ì„ ë‚´ì„¸ìš°ëŠ” ê²ƒì— ì–´ë ¤ì›€',
                    match: 'ì°°ë–¡ê¶í•©: ESFP, ESTP',
                    character: 'ìºë¦­í„° ë¹„ìœ : ëª¨ë‘ë¥¼ ì±™ê¸°ëŠ” \'ìš°ë¦¬ íŒ€ ë°¥ë„ë‘‘\'.'
                },
                'INFJ': {
                    name: 'ì„ ì˜ì˜ ì˜¹í˜¸ì',
                    feature: 'ì±„ë„ì˜ ì •ì‹ ì  ì§€ì£¼\'. ê¹Šì€ í†µì°°ë ¥ìœ¼ë¡œ ì±„ë„ì˜ ë¹„ì „ì„ ì œì‹œí•˜ê³ , ì˜ë¯¸ ìˆëŠ” ì½˜í…ì¸ ë¥¼ ë§Œë“ ë‹¤.',
                    strengths: 'ê°•ì : ì°½ì˜ì ì¸ ê¸°íšë ¥, íŒ€ì›ë“¤ì˜ ì ì¬ë ¥ ë°œêµ´, ê°ë™ì ì¸ ìŠ¤í† ë¦¬í…”ë§',
                    weaknesses: 'ì•½ì : í˜„ì‹¤ì ì¸ ì–´ë ¤ì›€ì— ì‰½ê²Œ ë‚™ë‹´',
                    match: 'ì°°ë–¡ê¶í•©: ENFP, ENTP',
                    character: 'ìºë¦­í„° ë¹„ìœ : \'ì¸ìƒì˜ ì˜ë¯¸\'ë¥¼ ì°¾ëŠ” ì² í•™ì.'
                },
                'INTJ': {
                    name: 'ìš©ì˜ì£¼ë„í•œ ì „ëµê°€',
                    feature: 'ëƒ‰ì² í•œ ì „ëµê°€\'. ë…¼ë¦¬ì ì´ê³  ì „ëµì ì¸ ë¶„ì„ìœ¼ë¡œ ì±„ë„ì˜ ì„±ê³µì„ ì´ëŒì–´ë‚¸ë‹¤.',
                    strengths: 'ê°•ì : ëª©í‘œ ì„¤ì •, ë°ì´í„° ê¸°ë°˜ì˜ ì±„ë„ ì„±ì¥ ì „ëµ, ë¹„íŒì  ì‚¬ê³ ',
                    weaknesses: 'ì•½ì : íƒ€ì¸ì˜ ê°ì •ì„ ê³ ë ¤í•˜ì§€ ì•Šì€ ëƒ‰ì •í•œ í”¼ë“œë°±',
                    match: 'ì°°ë–¡ê¶í•©: ENFP, ENTP',
                    character: 'ìºë¦­í„° ë¹„ìœ : ë¨¸ë¦¿ì†ì— \'ì„±ê³µ ë°©ì •ì‹\'ì´ ìˆëŠ” ì²œì¬.'
                },
                'ISTP': {
                    name: 'ë§ŒëŠ¥ ì¬ì£¼ê¾¼',
                    feature: 'ê¸ˆì† ì—”ì§€ë‹ˆì–´\'. ë›°ì–´ë‚œ ê¸°ìˆ ë ¥ìœ¼ë¡œ í¸ì§‘, ì´¬ì˜ ì¥ë¹„ ë“±ì„ ë‹¤ë£¨ë©° ì±„ë„ì˜ í€„ë¦¬í‹°ë¥¼ ë†’ì¸ë‹¤.',
                    strengths: 'ê°•ì : ë¬¸ì œ í•´ê²° ëŠ¥ë ¥, ì‹¤ì œì ì¸ ì‘ì—… ëŠ¥ë ¥, ì¦‰í¥ì ì¸ ìƒí™© ëŒ€ì²˜ ëŠ¥ë ¥',
                    weaknesses: 'ì•½ì : ê¸°íš ë‹¨ê³„ë‚˜ íšŒì˜ì— ì§‘ì¤‘í•˜ì§€ ëª»í•¨',
                    match: 'ì°°ë–¡ê¶í•©: ESFJ, ESTJ',
                    character: 'ìºë¦­í„° ë¹„ìœ : ëª¨ë“  ê²ƒì„ ê³ ì¹˜ëŠ” \'ë§¥ê°€ì´ë²„\'.'
                },
                'ISFP': {
                    name: 'í˜¸ê¸°ì‹¬ ë§ì€ ì˜ˆìˆ ê°€',
                    feature: 'ììœ ë¡œìš´ ì˜ˆìˆ ê°€\'. ììœ ë¡œìš´ ê°ì„±ìœ¼ë¡œ ì˜ìƒë¯¸ë¥¼ ë”í•˜ê³ , ì§ê´€ì ì¸ ê°ê°ìœ¼ë¡œ ì˜ìƒì˜ ë¶„ìœ„ê¸°ë¥¼ ì‚´ë¦°ë‹¤.',
                    strengths: 'ê°•ì : ë›°ì–´ë‚œ ì˜ìƒë¯¸, ê°ê°ì ì¸ í¸ì§‘, ìì—°ìŠ¤ëŸ¬ìš´ ì¶œì—°',
                    weaknesses: 'ì•½ì : ì •í•´ì§„ ê·œì¹™ì´ë‚˜ ì‹œê°„ ì œì•½ì— ëŒ€í•œ ë‹µë‹µí•¨',
                    match: 'ì°°ë–¡ê¶í•©: ESFJ, ESTJ',
                    character: 'ìºë¦­í„° ë¹„ìœ : \'ì˜¤ëŠ˜ë§Œ ì‚¬ëŠ”\' ê°ì„± ì²œì¬.'
                },
                'INFP': {
                    name: 'ì—´ì •ì ì¸ ì¤‘ì¬ì',
                    feature: 'íŒ€ì˜ íë§ ìš”ì •\'. ë”°ëœ»í•œ ë§ˆìŒìœ¼ë¡œ íŒ€ì›ë“¤ì„ ê²©ë ¤í•˜ê³ , ëª¨ë‘ê°€ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ë¶„ìœ„ê¸°ë¥¼ ë§Œë“ ë‹¤.',
                    strengths: 'ê°•ì : ê¸ì •ì ì¸ ì—ë„ˆì§€, ë…íŠ¹í•˜ê³  ë”°ëœ»í•œ ì½˜í…ì¸  ê¸°íš, íŒ€ì›Œí¬ í–¥ìƒ',
                    weaknesses: 'ì•½ì : í˜„ì‹¤ì ì¸ ë¬¸ì œì— ëŒ€í•œ ë¬´ê´€ì‹¬',
                    match: 'ì°°ë–¡ê¶í•©: ENTJ, ESTJ',
                    character: 'ìºë¦­í„° ë¹„ìœ : \'ê°ì„± ì¶©ì „ê¸°\'ë¥¼ ë“¤ê³  ë‹¤ë‹ˆëŠ” ìœ íŠœë²„.'
                },
                'INTP': {
                    name: 'ë…¼ë¦¬ì ì¸ ì‚¬ìƒ‰ê°€',
                    feature: 'ë˜‘ë˜‘í•œ ë¸Œë ˆì¸\'. ë³µì¡í•œ ì•„ì´ë””ì–´ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ì •ë¦¬í•˜ê³ , ì±„ë„ì˜ ë°©í–¥ì„±ì„ ê³¼í•™ì ìœ¼ë¡œ ë¶„ì„í•œë‹¤.',
                    strengths: 'ê°•ì : ë…ì°½ì ì¸ ì½˜í…ì¸  ì•„ì´ë””ì–´, ë…¼ë¦¬ì ì´ê³  ì²´ê³„ì ì¸ ë¶„ì„, ì§€ì  í˜¸ê¸°ì‹¬',
                    weaknesses: 'ì•½ì : ì‚¬íšŒì  ìƒí˜¸ì‘ìš©ì— ì–´ë ¤ì›€',
                    match: 'ì°°ë–¡ê¶í•©: ENTJ, ESTJ',
                    character: 'ìºë¦­í„° ë¹„ìœ : \'ìƒê°í•˜ëŠ” ë¡œë´‡\'ì²˜ëŸ¼ ì •í™•í•œ ë…¼ë¦¬ë ¥ì„ ê°€ì§„ ì²œì¬.'
                },
                'ESTP': {
                    name: 'ëª¨í—˜ì„ ì¦ê¸°ëŠ” ì‚¬ì—…ê°€',
                    feature: 'ì§„ì •í•œ ëª¨í—˜ê°€\'. ì§ì ‘ ëª¸ìœ¼ë¡œ ë¶€ë”ªíˆë©° ì½˜í…ì¸ ë¥¼ ë§Œë“¤ê³ , ì¬ë¯¸ìˆëŠ” ëŒë°œ ìƒí™©ì„ ìœ ë„í•œë‹¤.',
                    strengths: 'ê°•ì : ë›°ì–´ë‚œ ìˆœë°œë ¥, ì¦‰í¥ì ì¸ ì¶œì—° ëŠ¥ë ¥, ìœ„ê¸° ëŒ€ì²˜ ëŠ¥ë ¥',
                    weaknesses: 'ì•½ì : ê³„íšì„ ì„¸ìš°ëŠ” ê²ƒì— ì–´ë ¤ì›€',
                    match: 'ì°°ë–¡ê¶í•©: ISFJ, ISTJ',
                    character: 'ìºë¦­í„° ë¹„ìœ : \'ëª¸ìœ¼ë¡œ ë§í•´ìš”\' ì±Œë¦°ì§€ 1ë“±.'
                },
                'ESFP': {
                    name: 'ììœ ë¡œìš´ ì˜í˜¼ì˜ ì—°ì˜ˆì¸',
                    feature: 'íƒ€ê³ ë‚œ ì—”í„°í…Œì´ë„ˆ\'. ì±„ë„ì˜ í™œë ¥ì†Œë¡œ, íƒ€ê³ ë‚œ ë¼ì™€ ì¬ëŠ¥ìœ¼ë¡œ ì‹œì²­ìë“¤ì„ ì¦ê²ê²Œ í•œë‹¤.',
                    strengths: 'ê°•ì : ë›°ì–´ë‚œ í‘œí˜„ë ¥, ì‚¬ëŒë“¤ì„ ëŒì–´ë‹¹ê¸°ëŠ” ë§¤ë ¥, ìœ ë¨¸ ê°ê°',
                    weaknesses: 'ì•½ì : ì¥ê¸°ì ì¸ ê³„íšì„ ì„¸ìš°ëŠ” ê²ƒì— ì–´ë ¤ì›€',
                    match: 'ì°°ë–¡ê¶í•©: ISFJ, ISTJ',
                    character: 'ìºë¦­í„° ë¹„ìœ : \'ëª¨ë‘ì˜ ì‚¬ë‘\'ì„ ë°›ëŠ” ì¸ê¸° ìŠ¤íƒ€.'
                },
                'ENFP': {
                    name: 'ì¬ê¸°ë°œë„í•œ í™œë™ê°€',
                    feature: 'ì•„ì´ë””ì–´ ë±…í¬\'. ìƒˆë¡œìš´ ì•„ì´ë””ì–´ì™€ ì—´ì •ìœ¼ë¡œ ì±„ë„ì— í™œê¸°ë¥¼ ë¶ˆì–´ë„£ê³ , ì‹œì²­ìì™€ ì†Œí†µí•œë‹¤.',
                    strengths: 'ê°•ì : ì°½ì˜ì ì¸ ê¸°íšë ¥, ë›°ì–´ë‚œ ì†Œí†µ ëŠ¥ë ¥, ê¸ì •ì ì¸ ì—ë„ˆì§€',
                    weaknesses: 'ì•½ì : ì‰½ê²Œ ì‹«ì¦ì„ ë‚´ê³  ê³„íšì„ ë°”ê¾¸ëŠ” ê²½í–¥',
                    match: 'ì°°ë–¡ê¶í•©: INFJ, INTJ',
                    character: 'ìºë¦­í„° ë¹„ìœ : \'ë°˜ì§ì´ëŠ” ì•„ì´ë””ì–´\'ë¡œ ê°€ë“ ì°¬ ë°˜ì§ì´ í­íƒ„.'
                },
                'ENTP': {
                    name: 'ëœ¨ê±°ìš´ ë…¼ìŸì„ ì¦ê¸°ëŠ” ë³€ë¡ ê°€',
                    feature: 'í† ë¡ ì˜ ì œì™•\'. ë…¼ë¦¬ì ì¸ ì‚¬ê³ ì™€ ê¸°ë°œí•œ ì•„ì´ë””ì–´ë¡œ ì±„ë„ì˜ ë°©í–¥ì„±ì„ í™•ì¥ì‹œí‚¨ë‹¤.',
                    strengths: 'ê°•ì : í†µì°°ë ¥, ë¶„ì„ë ¥, ë³µì¡í•œ ë¬¸ì œ í•´ê²° ëŠ¥ë ¥',
                    weaknesses: 'ì•½ì : ì„¸ë¶€ì ì¸ ê·œì¹™ì´ë‚˜ ë°˜ë³µì ì¸ ì‘ì—…ì— ëŒ€í•œ ê±°ë¶€ê°',
                    match: 'ì°°ë–¡ê¶í•©: INFJ, INTJ',
                    character: 'ìºë¦­í„° ë¹„ìœ : \'ìƒê°ì˜ í‹€\'ì„ ê¹¨ë¶€ìˆ˜ëŠ” ë¸Œë ˆì¸.'
                },
                'ESTJ': {
                    name: 'ì—„ê²©í•œ ê´€ë¦¬ì',
                    feature: 'ì² ë‘ì² ë¯¸í•œ ë¦¬ë”\'. ì² ì €í•œ ê³„íšê³¼ ì±…ì„ê°ìœ¼ë¡œ ì±„ë„ì˜ ìš´ì˜ì„ ì´ê´„í•˜ë©° ëª©í‘œë¥¼ ë‹¬ì„±í•œë‹¤.',
                    strengths: 'ê°•ì : íš¨ìœ¨ì ì¸ ì¼ì • ê´€ë¦¬, ì²´ê³„ì ì¸ íŒ€ì› ê´€ë¦¬, ëª…í™•í•œ ì—­í•  ë¶„ë‹´',
                    weaknesses: 'ì•½ì : ìœµí†µì„±ì´ ë¶€ì¡±í•˜ê³  ê³ ì§‘ì´ ê°•í•¨',
                    match: 'ì°°ë–¡ê¶í•©: INFP, INTP',
                    character: 'ìºë¦­í„° ë¹„ìœ : \'ì¹¼í‡´\'ë¥¼ ê¿ˆê¾¸ëŠ” ì™„ë²½ì£¼ì˜ì.'
                },
                'ESFJ': {
                    name: 'ì‚¬êµì ì¸ ì™¸êµê´€',
                    feature: 'íŒ€ì˜ ì†Œê¸ˆ ê°™ì€ ì¡´ì¬\'. íŒ€ì›ë“¤ ì‚¬ì´ì˜ ê°ˆë“±ì„ ì¤‘ì¬í•˜ê³ , ê¸ì •ì ì¸ ë¶„ìœ„ê¸°ë¥¼ ì¡°ì„±í•œë‹¤.',
                    strengths: 'ê°•ì : ë›°ì–´ë‚œ ê³µê° ëŠ¥ë ¥, íŒ€ì›Œí¬ í–¥ìƒ, ì‚¬ëŒë“¤ì˜ ë§ˆìŒì„ ì‚¬ë¡œì¡ëŠ” ì½˜í…ì¸  ê¸°íš',
                    weaknesses: 'ì•½ì : ë¹„íŒì ì¸ í”¼ë“œë°±ì— ë¯¼ê°í•¨',
                    match: 'ì°°ë–¡ê¶í•©: ISFP, ISTP',
                    character: 'ìºë¦­í„° ë¹„ìœ : \'ìš°ë¦¬ íŒ€ì˜ ì—„ë§ˆ\' ì—­í• ì„ í•˜ëŠ” ë”°ëœ»í•œ ë¦¬ë”.'
                },
                'ENFJ': {
                    name: 'ì •ì˜ë¡œìš´ ì‚¬íšŒìš´ë™ê°€',
                    feature: 'ë™ê¸° ë¶€ì—¬ì˜ ì‹ \'. ì‚¬ëŒë“¤ì—ê²Œ ì˜ê°ì„ ì£¼ëŠ” ì½˜í…ì¸ ë¥¼ ê¸°íší•˜ê³ , íŒ€ì›ë“¤ì„ ê²©ë ¤í•˜ë©° í•¨ê»˜ ì„±ì¥í•œë‹¤.',
                    strengths: 'ê°•ì : ë›°ì–´ë‚œ ë¦¬ë”ì‹­, ì‚¬ëŒì„ ë„ëŠ” ë§¤ë ¥, ì˜ë¯¸ ìˆëŠ” ì½˜í…ì¸  ê¸°íš',
                    weaknesses: 'ì•½ì : íƒ€ì¸ì˜ í‰ê°€ì— ì§€ë‚˜ì¹˜ê²Œ ì‹ ê²½ ì“°ëŠ” ê²½í–¥',
                    match: 'ì°°ë–¡ê¶í•©: INFP, ISFP',
                    character: 'ìºë¦­í„° ë¹„ìœ : \'ì˜ê°ì„ ì£¼ëŠ”\' ë¦¬ë”.'
                },
                'ENTJ': {
                    name: 'ëŒ€ë‹´í•œ í†µì†”ì',
                    feature: 'ì¹´ë¦¬ìŠ¤ë§ˆ CEO\'. ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•´ íŒ€ì„ ì´ëŒê³ , íš¨ìœ¨ì ì¸ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•œë‹¤.',
                    strengths: 'ê°•ì : ë›°ì–´ë‚œ ë¦¬ë”ì‹­, ëª…í™•í•œ ë¹„ì „ ì œì‹œ, ê°•ë ¥í•œ ì¶”ì§„ë ¥',
                    weaknesses: 'ì•½ì : ë‹¤ë¥¸ ì‚¬ëŒì˜ ì˜ê²¬ì„ ë¬´ì‹œí•˜ê³  ë…ë‹¨ì ìœ¼ë¡œ ê²°ì •í•˜ëŠ” ê²½í–¥',
                    match: 'ì°°ë–¡ê¶í•©: INFP, INTP',
                    character: 'ìºë¦­í„° ë¹„ìœ : \'ë‚´ê°€ ë°”ë¡œ ìœ íŠœë¸Œ ì™•\'ì´ë¼ê³  ì™¸ì¹˜ëŠ” í†µì†”ì.'
                }
            };
            
            let currentQuestionIndex = 0;
            let mbtiCounts = { 'E': 0, 'I': 0, 'S': 0, 'N': 0, 'T': 0, 'F': 0, 'J': 0, 'P': 0 };
            let userName = '';

            const startScreen = document.getElementById('start-screen');
            const quizScreen = document.getElementById('quiz-screen');
            const resultScreen = document.getElementById('result-screen');
            const startButton = document.getElementById('start-button');
            const restartButton = document.getElementById('restart-button');
            const copyButton = document.getElementById('copy-button');
            const quizQuestionContainer = document.getElementById('quiz-question-container');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const resultType = document.getElementById('result-type');
            const resultFeature = document.getElementById('result-feature');
            const resultStrengths = document.getElementById('result-strengths');
            const resultWeaknesses = document.getElementById('result-weaknesses');
            const resultMatch = document.getElementById('result-match');
            const resultCharacter = document.getElementById('result-character');
            const userNameInput = document.getElementById('userName');

            // ì˜¤ë””ì˜¤ ìš”ì†Œë“¤
            const bgm = document.getElementById('bgm');
            const clickSound = document.getElementById('clickSound');
            const resultSound = document.getElementById('resultSound');

            // ì´ë¦„ ì…ë ¥ í•„ë“œ ì´ë²¤íŠ¸
            userNameInput.addEventListener('input', function() {
                const name = this.value.trim();
                startButton.disabled = name.length === 0;
                
                if (name.length > 0) {
                    startButton.classList.remove('opacity-50', 'cursor-not-allowed');
                    startButton.classList.add('pulse-ring');
                } else {
                    startButton.classList.add('opacity-50', 'cursor-not-allowed');
                    startButton.classList.remove('pulse-ring');
                }
            });

            userNameInput.addEventListener('focus', function() {
                document.getElementById('inputGlow').style.opacity = '0.2';
            });

            userNameInput.addEventListener('blur', function() {
                document.getElementById('inputGlow').style.opacity = '0';
            });

            // êµ¬ê¸€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ì €ì¥ í•¨ìˆ˜
            async function saveToSpreadsheet(mbtiType, resultData) {
                try {
                    const currentDate = new Date();
                    const formattedDate = currentDate.toLocaleString('ko-KR', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit'
                    });

                    const data = {
                        timestamp: formattedDate,
                        name: userName,
                        resultTitle: `${mbtiType} (${resultData.name})`,
                        resultContent: resultData.feature,
                        score: `E:${mbtiCounts.E} I:${mbtiCounts.I} S:${mbtiCounts.S} N:${mbtiCounts.N} T:${mbtiCounts.T} F:${mbtiCounts.F} J:${mbtiCounts.J} P:${mbtiCounts.P}`
                    };

                    const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data),
                        mode: 'no-cors'
                    });

                    console.log('ê²°ê³¼ê°€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');

                } catch (error) {
                    console.error('ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                }
            }

            function showScreen(screenId) {
                startScreen.classList.add('hidden');
                quizScreen.classList.add('hidden');
                resultScreen.classList.add('hidden');
                document.getElementById(screenId).classList.remove('hidden');
            }

            function renderQuestion() {
                const questionData = quizData[currentQuestionIndex];
                quizQuestionContainer.innerHTML = `
                    <div class="p-8 bg-gradient-to-br from-purple-100 to-blue-100 rounded-2xl shadow-inner slide-in">
                        <p class="text-3xl font-semibold text-gray-800 leading-relaxed">${questionData.question}</p>
                    </div>
                    <div class="mt-8 space-y-4">
                        ${questionData.options.map((option, index) => `
                            <button class="w-full p-6 text-left text-xl bg-white/80 rounded-xl shadow-md hover:bg-purple-50 transition-all duration-300 option-button hover-lift border-2 border-transparent hover:border-purple-300" data-value="${option.value}">
                                <span class="text-gray-800 leading-relaxed">${option.text}</span>
                            </button>
                        `).join('')}
                    </div>
                `;
                
                document.querySelectorAll('.option-button').forEach(button => {
                    button.addEventListener('click', handleOptionClick);
                });

                progressText.textContent = `${currentQuestionIndex + 1}/12`;
                progressBar.style.width = `${((currentQuestionIndex + 1) / 12) * 100}%`;
            }

            function handleOptionClick(event) {
                // í´ë¦­ ì‚¬ìš´ë“œ ì¬ìƒ
                clickSound.currentTime = 0;
                clickSound.play().catch(e => console.log('Click sound failed:', e));

                const value = event.target.dataset.value;
                mbtiCounts[value]++;
                
                currentQuestionIndex++;
                if (currentQuestionIndex < quizData.length) {
                    setTimeout(() => {
                        renderQuestion();
                    }, 200);
                } else {
                    setTimeout(() => {
                        showResult();
                    }, 500);
                }
            }

            async function showResult() {
                // BGM ì •ì§€
                bgm.pause();
                
                // ê²°ê³¼ ì‚¬ìš´ë“œ ì¬ìƒ
                resultSound.currentTime = 0;
                resultSound.play().catch(e => console.log('Result sound failed:', e));

                let mbtiType = '';
                mbtiType += mbtiCounts['E'] > mbtiCounts['I'] ? 'E' : 'I';
                mbtiType += mbtiCounts['S'] > mbtiCounts['N'] ? 'S' : 'N';
                mbtiType += mbtiCounts['T'] > mbtiCounts['F'] ? 'T' : 'F';
                mbtiType += mbtiCounts['J'] > mbtiCounts['P'] ? 'J' : 'P';
                
                const resultData = results[mbtiType];
                
                resultType.textContent = `${mbtiType} (${resultData.name})`;
                resultFeature.textContent = `íŠ¹ì§•: ${resultData.feature}`;
                resultStrengths.textContent = resultData.strengths;
                resultWeaknesses.textContent = resultData.weaknesses;
                resultMatch.textContent = resultData.match;
                resultCharacter.textContent = resultData.character;

                showScreen('result-screen');
                
                // êµ¬ê¸€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì— ì €ì¥
                await saveToSpreadsheet(mbtiType, resultData);
            }

            function restartTest() {
                currentQuestionIndex = 0;
                mbtiCounts = { 'E': 0, 'I': 0, 'S': 0, 'N': 0, 'T': 0, 'F': 0, 'J': 0, 'P': 0 };
                userName = '';
                userNameInput.value = '';
                startButton.disabled = true;
                startButton.classList.add('opacity-50', 'cursor-not-allowed');
                startButton.classList.remove('pulse-ring');
                progressBar.style.width = '0%';
                
                // BGM ì •ì§€
                bgm.pause();
                bgm.currentTime = 0;
                
                showScreen('start-screen');
            }

            function copyResult() {
                const mbtiType = resultType.textContent;
                const feature = resultFeature.textContent;
                const strengths = resultStrengths.textContent;
                const weaknesses = resultWeaknesses.textContent;
                const match = resultMatch.textContent;
                const character = resultCharacter.textContent;

                const resultText = `ğŸ‰ ${userName}ë‹˜ì˜ MBTI í…ŒìŠ¤íŠ¸ ê²°ê³¼ ğŸ‰

${mbtiType}

${feature}

${strengths}
${weaknesses}
${match}
${character}

ğŸ“± ìš°ë¦¬ ë°˜ ìœ íŠœë¸Œ ì±„ë„ MBTI í…ŒìŠ¤íŠ¸ì—ì„œ í™•ì¸í–ˆì–´ìš”!`;

                navigator.clipboard.writeText(resultText).then(() => {
                    copyButton.innerHTML = 'âœ… ë³µì‚¬ ì™„ë£Œ!';
                    setTimeout(() => {
                        copyButton.innerHTML = 'ğŸ“‹ ê²°ê³¼ ë³µì‚¬í•˜ê¸°';
                    }, 2000);
                }).catch(err => {
                    console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
                    alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì €ê°€ ë³µì‚¬ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                });
            }

            startButton.addEventListener('click', () => {
                userName = userNameInput.value.trim();
                if (userName) {
                    // BGM ì¬ìƒ
                    bgm.currentTime = 0;
                    bgm.play().catch(e => console.log('BGM failed:', e));
                    
                    showScreen('quiz-screen');
                    setTimeout(() => {
                        renderQuestion();
                    }, 300);
                }
            });

            restartButton.addEventListener('click', restartTest);
            copyButton.addEventListener('click', copyResult);

            // Enter í‚¤ë¡œ ì‹œì‘í•˜ê¸°
            userNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !startButton.disabled) {
                    startButton.click();
                }
            });
        });
    </script>
</body>
</html>
